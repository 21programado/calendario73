<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calendario</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#020617">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: #0f172a;
    color: #e5e7eb;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

.calendar {
    width: 100%;
    max-width: 360px;
    background: #020617;
    border-radius: 16px;
    padding: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.header button {
    background: none;
    border: none;
    color: #38bdf8;
    font-size: 1.6em;
    cursor: pointer;
}

.header h2 {
    margin: 0;
    font-size: 1.2em;
    font-weight: 500;
}

.weekdays,
.days {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    text-align: center;
}

.weekdays div {
    font-size: 0.75em;
    color: #94a3b8;
    padding: 6px 0;
}

.days div {
    padding: 10px 0;
    margin: 2px;
    border-radius: 8px;
    font-size: 0.9em;
}

.today {
    background: #38bdf8;
    color: #020617;
    font-weight: bold;
}

.empty {
    visibility: hidden;
}
</style>
</head>

<body>

<div class="calendar">
    <div class="header">
        <button onclick="changeMonth(-1)">‹</button>
        <h2 id="monthYear"></h2>
        <button onclick="changeMonth(1)">›</button>
    </div>

    <!-- DOMINGO PRIMERO -->
    <div class="weekdays">
        <div>D</div><div>L</div><div>M</div><div>X</div><div>J</div><div>V</div><div>S</div>
    </div>

    <div class="days" id="days"></div>
</div>

<script>
const monthYear = document.getElementById("monthYear");
const daysContainer = document.getElementById("days");

let currentDate = new Date();

function renderCalendar() {
    daysContainer.innerHTML = "";

    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();

    // 0 = Domingo, 6 = Sábado
    const firstDay = new Date(year, month, 1).getDay();
    const lastDate = new Date(year, month + 1, 0).getDate();

    const months = [
        "Enero","Febrero","Marzo","Abril","Mayo","Junio",
        "Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"
    ];

    monthYear.textContent = `${months[month]} ${year}`;

    // Espacios vacíos antes del día 1
    for (let i = 0; i < firstDay; i++) {
        const empty = document.createElement("div");
        empty.classList.add("empty");
        daysContainer.appendChild(empty);
    }

    const today = new Date();

    for (let day = 1; day <= lastDate; day++) {
        const div = document.createElement("div");
        div.textContent = day;

        if (
            day === today.getDate() &&
            month === today.getMonth() &&
            year === today.getFullYear()
        ) {
            div.classList.add("today");
        }

        daysContainer.appendChild(div);
    }
}

function changeMonth(direction) {
    currentDate.setMonth(currentDate.getMonth() + direction);
    renderCalendar();
}

renderCalendar();
</script>

<script>
/* Service Worker */
if ("serviceWorker" in navigator) {
    window.addEventListener("load", () => {
        navigator.serviceWorker.register("sw.js");
    });
}
</script>

</body>
</html>
